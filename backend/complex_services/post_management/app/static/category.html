<!DOCTYPE html>
<html>
<head>
    <title>Tech-Exchange - Home</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="stylesheet" type="text/css" href="../css//homepage.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="//code.jquery.com/jquery.min.js"></script>
</head>
<body>
    <script id="replace_with_navbar" src="navbar.js"></script>

     <!-- <div class="album py-5 bg-light"> -->
        <div class="container">
            <button class="filter" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-filter" viewBox="0 0 16 16">
                <path d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5"/>
              </svg>
            </button>

            <br><br><br>

            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">


            </div>








<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";
  
    const firebaseConfig = {
      // Your Firebase config
        apiKey: "AIzaSyACeAF5_819WDlV2PM7FEQQ5R2YGGWklCM",
        authDomain: "techexchange-76048.firebaseapp.com",
        databaseURL: "https://techexchange-76048-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "techexchange-76048",
        storageBucket: "techexchange-76048.appspot.com",
        messagingSenderId: "396217100321",
        appId: "1:396217100321:web:ba771f3033a2caf6ec1b60",
        measurementId: "G-51BT4968FL"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
  
    // Function to get the query parameter value for 'category'
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }
  
    async function displayItemsByCategory() {
      const category = getQueryParam('category');
    //   console.log("taylor", category);
      const q = query(collection(db, "post"), where("category", "==", category));
      const querySnapshot = await getDocs(q);
      const itemsContainer = document.querySelector('.row');

      querySnapshot.forEach((doc) => {
        const data = doc.data();
        const locationString = `Latitude: ${data.location.latitude}, Longitude: ${data.location.longitude}`;
        const formattedDate = formatTimestamp(data.datetime); // Assuming data.datetime is the timestamp

        const cardHtml = `
      <div class="col">
        <div class="card shadow-sm">
          <img src="${imgUrl}" class="d-block w-100" alt="${data.name}">
          <div class="card-body">
            <h5 class="card-title">${data.name}</h5>
            <p class="card-text">${data.desc}</p>
            <p class="card-text">Location: ${locationString}</p>
            <p class="card-text">Posted on: ${formattedDate}</p>
            <p class="card-text">Category: ${data.category}</p>
            <div class="d-flex justify-content-between align-items-center">
            <small class="text-muted">${formattedDate} mins ago</small>
            </div>
          </div>
        </div>
      </div>
    `;

    itemsContainer.innerHTML += cardHtml;

      });
    }
  
    displayItemsByCategory();
  </script>
  </body>


  </html>